<!DOCTYPE HTML>
<html>
    <head>
        
        <meta charset="utf-8"/>
        <title>Chevron Oronite</title>
        <meta name="pspdf-platform" content="web">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <link rel="stylesheet" href='css/style.css'/>
        <link href="http://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
        <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.2/css/all.css" integrity="sha384-oS3vJWv+0UjzBfQzYUhtDYW+Pj2yciDJxpsK1OYPAYjqT085Qq/1cq5FLXAZQ7Ay" crossorigin="anonymous">
        <link rel="stylesheet" href='css/crud.css'/>
        <link rel="stylesheet" href='css/custom.css'/>
        
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
        <script src="http://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
        <script src="js/pdf.js"></script>
        <script src="js/pdf.worker.js"></script>
        
        <script src="https://raw.githubusercontent.com/mozilla/pdf.js/master/web/ui_utils.js"></script>


        <style>
            #optionsPane a {
                font-weight: bold;
                text-decoration: underline;
                color: black;
            }

            #optionsPane {
                text-align: center;
                font-size: 14px;
                color: black;
                padding: 10px;
            }

            #pagination {
                margin: 0 15px;
            }

            #zoominbutton,#zoomoutbutton {
                width: 20px;
                height: 20px;
                border-radius: 50%;
                border: 1px solid;
            }

            #zoominbutton,#zoomoutbutton,#printBtn,#searchBtn,#moveToPageBtn{
                background: transparent;
                font-size: 14px;
            }

            #printBtn,#searchBtn,#moveToPageBtn{
                border: none;
            }

            #pagination select {
                background: transparent;
                border: 1px;
                font-size: 14px;
                border-radius: 0px;
            }

            #searchBlock button, #moveToPageBlock button {
                background-color: transparent;
                font: inherit;
                border: 1px solid currentColor;
                border-radius: 3px;
                padding: 0.25em 0.5em;
            }


            #mySidenav a {
                color: white;
            }

            #left-menu li {
                color: black;
            }

            #left-menu{
                width: 30pt;
                position: fixed;
                top: 0;
                left: 0;
                transition: all 1s;
                height: 100vh;
                background-color: #ff602d;
                padding: 30pt 2pt;
                z-index: 9999;
            }
            #left-menu:hover{
                width: 300pt;
                box-shadow: 18pt 0pt 62pt 1000pt #000000e0;
            }
            #left-menu h3{
                text-align: center;
                transform: rotate(-90deg);
                transition: all 1s;
                color: #fff;
            }
            #left-menu:hover h3{
                transform: rotate(0deg);
            }
            #mySidenav {
                display: none;
                overflow: scroll;
                height: 100vh;
            }
            #left-menu:hover #mySidenav{
                display:block;
            }
            .li-chap {
                padding-left: 58px;
            }
            li {
                font-size: 10pt;
                padding: 5px;
            }
            .sidenav a {
                padding: 8px 8px 8px 32px;
                text-decoration: none;
                font-size: 16px;
                color: #fff;
                display: block;
                transition: 0.3s;
                cursor: pointer;
            }
            .s-chap {
                padding: 0!important;
                text-decoration: none!important;
                font-size: 10pt!important;
                /* color: #000000; */
                display: block;
                transition: none!important;
                color: black!important;
            }

            @media only screen and (max-width: 500px){
                div#left-menu {
                    width: 100vw;
                    height: auto;
                    padding: 10pt 2pt;
                }
                #left-menu h3 {
                    height: 30px;
                    transform: rotate(0);
                }
                #pdf-canvas {
                    margin-top: 30px;
                }

            }

        </style>
    </head>
    <body>

        <div id="left-menu">
            <h3 style="font-size: 16px">MENU</h3>
            <div id="mySidenav" class="sidenav">
                <a onclick="showPage(1)">Page de couverture</a>
                <a onclick="showPage(7);">Chapter 1: Viscosity classifcations - SAE J300</a>
                <div class="li-chap">
                    <ul style="">
                        <li><a onclick="showPage(8);" class="s-chap">SAE J300 revised January 2015 - SAE viscosity grades for engine oils </a></li>
                    </ul>
                </div>
                <a onclick="showPage(9);">Chapter 2: API and ILSAC requirements for gasoline and diesel engine oils</a>
                <div class="li-chap">
                    <ul style="">
                        <li><a class="s-chap">API «S» and ILSAC Gasoline service categories engine and laboratory test requirement summary</a></li>
                        <li><a onclick="showPage(10);" class="s-chap">- Current</a></li>
                        <li><a onclick="showPage(11);" class="s-chap">- Obsolete</a></li>
                        <li><a onclick="showPage(12);" class="s-chap">API SM, SN, SN + RC Gasoline service category laboratory test limits</a></li>
                        <li><a onclick="showPage(14);" class="s-chap">API SH, SJ and SL Gasoline service category laboratory test limits</a></li>
                        <li><a onclick="showPage(16);" class="s-chap">API «S» Gasoline service categories engine test limits</a></li>
                        <li><a onclick="showPage(19);" class="s-chap">ILSAC GF-4 &amp; GF-5 Standard laboratory test limits </a></li>
                        <li><a onclick="showPage(21);" class="s-chap">ILSAC GF-1, GF-2 and GF-3 Standard laboratory test limits</a></li>
                        <li><a onclick="showPage(22);" class="s-chap">ILSAC Standards engine test limits</a></li>
                        <li><a onclick="showPage(25);" class="s-chap">API «C» Diesel service categories engine and laboratory test requirement summary - Current</a></li>
                        <li><a onclick="showPage(26);" class="s-chap">API «C» Diesel service categories laboratory test limits - Current</a></li>
                        <li><a onclick="showPage(28);" class="s-chap">API «C» Diesel service categories engine test limits - Current</a></li>
                        <li><a onclick="showPage(32);" class="s-chap">API «C» Diesel service categories engine and laboratory test requirement summary - Obsolete</a></li>
                        <li><a onclick="showPage(33);" class="s-chap">API «C» Diesel service categories engine test limits - Obsolete</a></li>
                    </ul>
                </div>
                <a onclick="showPage(36);">Chapter 3: ACEA sequences for gasoline and diesel engine oils</a>
                <div class="li-chap">
                    <ul style="">
                        <li><a onclick="showPage(37);" class="s-chap">ACEA sequences - Overview of validity periods </a></li>
                        <li><a class="s-chap">ACEA 2016 European oil sequence for service-fll oils</a></li>
                        <li><a onclick="showPage(38);" class="s-chap">- For gasoline and diesel engines </a></li>
                        <li><a onclick="showPage(46);" class="s-chap">- For heavy duty diesel engines</a></li>
                        <li><a class="s-chap">ACEA 2012 European oil sequence for service-fll oils</a></li>
                        <li><a onclick="showPage(50);" class="s-chap">- For gasoline and diesel engines</a></li>
                        <li><a onclick="showPage(59);" class="s-chap">- For heavy duty diesel engines</a></li>
                    </ul>
                </div>
                <a onclick="showPage(63);">Chapter 4: China GB, Global DHD-1, JASO HD-DL and US Military requirements for diesel engine oils</a>
                <div class="li-chap">
                    <ul style="">
                        <li><a onclick="showPage(64);" class="s-chap">GB 11121 - 2006 (#) - Passenger car gasoline engine oil</a></li>
                        <li><a onclick="showPage(66);" class="s-chap">GB 11122 - 2006 (#) - Heavy duty diesel engine oil</a></li>
                        <li><a onclick="showPage(68);" class="s-chap">GLOBAL DHD-1- specifcation </a></li>
                        <li><a onclick="showPage(70);" class="s-chap">JASO DH-1, DH-2, DH-2F, DL-0, DL-1 specifcation - Laboratory test</a></li>
                        <li><a onclick="showPage(72);" class="s-chap">JASO DH-1, DH-2, DH-2F, DL-0, DL-1 specifcation - Engine test</a></li>
                        <li><a onclick="showPage(74);" class="s-chap">MIL-PRF-2104H specifcation</a></li>
                    </ul>
                </div>
                <a onclick="showPage(78);">Chapter 5: OEM requirements for gasoline and diesel engine oils</a>
                <div class="li-chap">
                    <ul style="">
                        <li><a onclick="showPage(79);" class="s-chap">BMW </a></li>
                        <li><a onclick="showPage(81);" class="s-chap">CATERPILLAR </a></li>
                        <li><a onclick="showPage(83);" class="s-chap">CHRYSLER </a></li>
                        <li><a onclick="showPage(84);" class="s-chap">CUMMINS </a></li>
                        <li><a onclick="showPage(90);" class="s-chap">DETROIT </a></li>
                        <li><a onclick="showPage(96);" class="s-chap">DETROIT </a></li>
                        <li><a onclick="showPage(100);" class="s-chap">FIAT </a></li>
                        <li><a onclick="showPage(104);" class="s-chap">FPT </a></li>
                        <li><a onclick="showPage(105);" class="s-chap">FORD </a></li>
                        <li><a onclick="showPage(107);" class="s-chap">GM </a></li>
                        <li><a onclick="showPage(112);" class="s-chap">JAGUAR </a></li>
                        <li><a onclick="showPage(113);" class="s-chap">MAN </a></li>
                        <li><a onclick="showPage(116);" class="s-chap">MERCEDES-BENZ </a></li>
                        <li><a onclick="showPage(133);" class="s-chap">MTU </a></li>
                        <li><a onclick="showPage(137);" class="s-chap">PACCAR DAF </a></li>
                        <li><a onclick="showPage(138);" class="s-chap">PORSCHE </a></li>
                        <li><a onclick="showPage(139);" class="s-chap">PSA - PEUGEOT - CITROEN </a></li>
                        <li><a onclick="showPage(145);" class="s-chap">RENAULT </a></li>
                        <li><a onclick="showPage(149);" class="s-chap">SCANIA </a></li>
                        <li><a onclick="showPage(150);" class="s-chap">VOLVO </a></li>
                        <li><a onclick="showPage(156);" class="s-chap">VOLKSWAGEN </a></li>
                    </ul>
                </div>
                <a onclick="showPage(160);">Chapter 6: ACC, API, ATC and ATIEL codes of practice (CoP)
                </a>
                <div class="li-chap">
                    <ul style="">
                        <li><a onclick="showPage(161);" class="s-chap">API and ATIEL base stock categories</a></li>
                        <li><a onclick="showPage(162);" class="s-chap">API EOLCS defnitions for Base Oil Interchangeability guidelines</a></li>
                        <li><a onclick="showPage(163);" class="s-chap">ATIEL Code of Practice defnitions for base stock interchange guidelines</a></li>
                        <li><a onclick="showPage(164);" class="s-chap">ATIEL base stock interchange guidelines use of alternative base stocks in validated formulations</a></li>
                        <li><a onclick="showPage(165);" class="s-chap">ACC and ATC guidelines for minor formulation modifcations</a></li>
                        <li><a onclick="showPage(169);" class="s-chap">ACC guidelines for program guidelines</a></li>
                        <li><a onclick="showPage(170);" class="s-chap">ACC and ATC guidelines data required for candidate data packages</a></li>
                    </ul>
                </div>
                <a onclick="showPage(172);">Chapter 7: API guidelines for: <br>
                    &nbsp; &nbsp; &nbsp; &nbsp; - Viscosity grade read-across (VGRA) <br>
                    &nbsp; &nbsp; &nbsp; &nbsp; - Base oil interchange (BOI)
                </a>
                <div class="li-chap">
                    <ul style="">
                        <li><a class="s-chap">API 1509 - Engine Oil Licensing and Certifcation System Guidelines:
                        </a></li>
                        <li><a onclick="showPage(173);" class="s-chap">- Viscosity Grades Read Across Requirements for formulations containing Group I, II, III and IV base stocks</a></li>
                        <li><a onclick="showPage(191);" class="s-chap">API 1509 - Engine Oil Licensing and Certifcation System Guidelines: API Base Oil Interchangeability guidelines for passenger car motor oils</a> </li>
                        <li><a onclick="showPage(197);" class="s-chap">API 1509 - Engine Oil Licensing and Certifcation System Guidelines: API Base Oil Interchangeability guidelines for diesel engine oils</a></li>
                    </ul>
                </div>
                <a onclick="showPage(209);">Chapter 8: ATIEL guidelines for: <br>
                    &nbsp; &nbsp; &nbsp; &nbsp; - Viscosity grade read-across (VGRA) <br>
                    &nbsp; &nbsp; &nbsp; &nbsp; - Base oil interchange (BOI)<br>
                    &nbsp; &nbsp; &nbsp; &nbsp; - Viscosity modifier interchange
                </a>
                <div class="li-chap">
                    <ul style="">
                        <li><a onclick="showPage(210);" class="s-chap">ATIEL viscosity grade read across guidelines <br><br>
                            ATIEL Base oil interchange guideline
                        </a></li>
                        <li><a onclick="showPage(219);" class="s-chap">- For the M271Evo &amp; M111SLs</a></li>
                        <li><a onclick="showPage(220);" class="s-chap">- For the DV6C, DV4TD, TU3M</a> </li>
                        <li><a onclick="showPage(221);" class="s-chap">- For the M111 FE test</a></li>
                        <li><a onclick="showPage(222);" class="s-chap">- For the OM646LA test </a></li>
                        <li><a onclick="showPage(223);" class="s-chap">- For the VW TDI, OM646LA Bio, EP6CDT, TU5JP &amp; OM501LA</a></li>
                        <li><a onclick="showPage(224);" class="s-chap">ATC viscosity modifier interchange guidelines</a></li>
                    </ul>
                </div>
                <a onclick="showPage(225);">Chapter 9: Tests and engines
                </a>
                <div class="li-chap">
                    <ul style="">
                        <li><a onclick="showPage(226);" class="s-chap">Engine test conditions
                        </a></li>
                    </ul>
                </div>
                <a onclick="showPage(231);">Chapter 10: Elastomer compatibility testing
                </a>
                <div class="li-chap">
                    <ul style="">
                        <li><a onclick="showPage(232);" class="s-chap">Elastomer compatibility operating conditions and limits
                        </a></li>
                    </ul>
                </div>
                <a onclick="showPage(244);">Chapter 11: Requirements for approvals and performance recognition
                </a>
                <div class="li-chap">
                    <ul style="">
                        <li><a onclick="showPage(245);" class="s-chap">Approvals and performance recognition
                        </a></li>
                    </ul>
                </div>
                <a onclick="showPage(247);">Chapter 12: OEM requirements for natural gas engine oils
                </a>
                <div class="li-chap">
                    <ul style="">
                        <li><a onclick="showPage(248);" class="s-chap">Requirements for gas engine oils for busses and trucks
                        </a></li>
                    </ul>
                </div>
                <a onclick="showPage(250);">Chapter 13: Unit conversion
                </a>
                <div class="li-chap">
                    <ul style="">
                        <li><a onclick="showPage(251);" class="s-chap">Unit conversion tables (temperature conversion)
                        </a></li>
                        <li><a onclick="showPage(254);" class="s-chap">Measurement conversion from US to SI units
                        </a></li>
                        <li><a onclick="showPage(256);" class="s-chap">Decimal inches to millimeters - Millimeters to inches
                        </a></li>
                    </ul>
                </div>
                <a onclick="showPage(257);">Acronym table
                </a>
                <div style="padding-bottom: 82px"></div>
            </div>
        </div>

        <main class="page-content">
            <div id="pdf-main-container">
                <div id="pdf-loader">Loading document...</div>
                <div id="pdf-contents">
                    <div id="subPdfContents">
                        <div id="canvasTextLayerDiv">
                            <div id="viewerContainer">
                                <canvas id="pdf-canvas"></canvas>
                            </div>
                            <div id="text-layer"></div>
                        </div>

                        <div id="optionsPane">
                            <div style="margin-bottom: 10px">
                                <a href="#" id="pdf-prev" data-pager="prev">Previous</a>
                                <span id="pagination">
                                    <span id="pdf-current-page"></span>/<span id="pdf-total-pages"></span>
                                </span>
                                <a href="#" id="pdf-next" data-pager="next">Following</a>
                            </div>
                            <div>
                                <button id="zoomoutbutton" type="button" title="Zoom in"><i class="fas fa-minus"></i></button>
                                <button id="zoominbutton" type="button" title="Zoom out"><i class="fas fa-plus"></i></button>
                                <select onchange="zoomSelectChange(event)" id="zoomSelect">
                                    <option value="0.5">10%</option>
                                    <option value="1">80%</option>
                                    <option value="1.25" selected="">100%</option>
                                    <option value="2">150%</option>
                                </select>
                                <button id="printBtn" onclick="window.print()" title="Print"><i class="fas fa-print"></i></button>
                                <div style="display: inline-block;position:relative;">
                                    <div id="searchBlock" style="display: none">
                                        <input id="searchInput" type="search" placeholder="Search..."/>
                                        <button onclick="fidman(event)"><i id="searchIcon" class="fas fa-search"></i></button>
                                        <button onclick="previousSearch(event)" id="previous" title="Previous"><i class="fas fa-chevron-circle-left"></i></button>
                                        <button onclick="nextSearch(event)" id="next" title="Next"><i class="fas fa-chevron-circle-right"></i></button>
                                        <span><span id="currentSearchPage">0</span>/<span id="totalSearchPages">0</span></span>
                                    </div>
                                    <button id="searchBtn" title="Search"><i class="fas fa-search"></i></button>
                                </div>
                                <div style="display: inline-block;position:relative;">
                                    <div id="moveToPageBlock" style="display: none;">
                                        <input id="moveToPageInput" type="text" placeholder="Page no"/>
                                        <button onclick="moveToPage(event)"><i class="fas fa-search"></i></button>
                                    </div>
                                    <button id="moveToPageBtn" title="Move to page"><i class="far fa-file"></i></button>
                                </div>
                            </div>

                        </div>
                    </div>
                    <div id="page-loader">Loading page ...</div>
                </div>
            </div>
        </main>

        <script src="js/script.js" ></script>
        <script>

            var canvasTextLayerDiv = document.getElementById("canvasTextLayerDiv");
            var currentSearchPage = document.getElementById("currentSearchPage");
            var totalSearchPages = document.getElementById("totalSearchPages");
            var currentSearchPageNo = 1;
            var searchText = '';
            var results = [];
            var searching = false;
            var indexResult = 0;
            var __PDF_DOC,
                __CURRENT_PAGE,
                __TOTAL_PAGES,
                __PAGE_RENDERING_IN_PROGRESS = 0,
                __CANVAS = $('#pdf-canvas').get(0),
                __CANVAS_CTX = __CANVAS.getContext('2d'),
                __PDF_SCALE = -1,
                __DEFAULT_SCALE = 1.25;

            function fidman(event){
                event.preventDefault();

                if(searching) return;

                searchText = document.getElementById('searchInput').value.toLowerCase().trim();

                results = [];
                indexResult = 0;
                if (searchText.length > 1) {
                    currentSearchPageNo = 0;
                    const searchIcon = document.getElementById("searchIcon");
                    searching = true;

                    searchIcon.classList.remove("fa-search");
                    searchIcon.classList.add("fa-spin","fa-spinner");

                    var promise = new Promise(function (resolve, reject) {
                        if (__PDF_DOC){
                            resolve(__PDF_DOC);
                        } else {
                            reject(new Error("No no no "));
                        }
                    });

                    promise
                        .then(function (doc) {
                            for (var i = 1; i <= doc.numPages; i++)
                                results.push(searchPage(doc, i));
                            return Promise.all(results);
                        })
                        .then(function (newResults) {
                            results = newResults.filter(function (result) {
                                return result !== undefined;
                            });
                            searching = false;
                            searchIcon.classList.remove("fa-spin","fa-spinner");
                            searchIcon.classList.add("fa-search");
                            if (results.length > 0) {
                                currentSearchPageNo = 1;
                                currentSearchPage.innerText = currentSearchPageNo+'';
                                totalSearchPages.innerText = results.length+'';
                                showPage(results[0]);
                            } else {
                                showPage(__CURRENT_PAGE);
                                currentSearchPageNo = 0;
                                currentSearchPage.innerText = currentSearchPageNo+'';
                                totalSearchPages.innerText = 0+'';
                            }
                        })
                        .catch(function (error) {
                            console.log(error);
                        });
                }
            }
            
            function nextSearch(event){
                if(event) event.preventDefault();
                if(results.length > 0)
                    if(indexResult < results.length - 1){
                        currentSearchPage.innerText = ++currentSearchPageNo+'';
                        showPage(results[++indexResult]);
                    }
            }
            
            function previousSearch(event){
                event.preventDefault();
                if(results.length > 0)
                    if(indexResult > 0){
                        currentSearchPage.innerText = --currentSearchPageNo+'';
                        showPage(results[--indexResult]);
                    }
            }

            showPDF('pdf/ORONITE_Digital_GuideMay2019.pdf');

            function showPDF(pdf_url) {
                $("#pdf-loader").show();
                
                PDFJS.getDocument({ url: pdf_url })
                    .then(function(pdf_doc) {
                    __PDF_DOC = pdf_doc;
                    __TOTAL_PAGES = __PDF_DOC.numPages;

                    // Hide the pdf loader and show pdf container in HTML
                    $("#pdf-loader").hide();
                    $("#pdf-contents").show();
                    $("#pdf-total-pages").text(__TOTAL_PAGES);

                    // Show the first page
                    showPage(1);
                }).catch(function(error) {
                    // If error re-show the upload button
                    $("#pdf-loader").hide();
                    $("#upload-button").show();

                    alert(error.message);
                });
            }

            function showPage(page_no) {
                __PAGE_RENDERING_IN_PROGRESS = 1;
                __CURRENT_PAGE = page_no;

                document.getElementById('text-layer').innerHTML = "";
                
                // Disable Prev & Next buttons while page is being loaded
                $("#pdf-next, #pdf-prev").attr('disabled', 'disabled');

                // While page is being rendered hide the canvas and show a loading message
                $("#pdf-canvas").hide();
                $("#page-loader").show();

                // Update current page in HTML
                $("#pdf-current-page").text(page_no);

                // Fetch the page
                __PDF_DOC.getPage(page_no).then(function(page) {
                    canvasTextLayerDiv.scrollTop = 0;
                    // As the canvas is of a fixed width we need to set the scale of the viewport accordingly
                    __CANVAS.width = $(window).width();

                    if (__PDF_SCALE < 0){
                        __PDF_SCALE = __DEFAULT_SCALE;
                        //__PDF_SCALE = __CANVAS.width / page.getViewport(1).width;
                    }

                    console.log(__PDF_SCALE);
                    // Get viewport of the page at required scale
                    var viewport = page.getViewport(__PDF_SCALE);

                    var canvas = document.getElementById('pdf-canvas');
                    canvas.width = viewport.width - 5;
                    canvas.height = viewport.height;
                    //canvas.style.width = "100%";
                    //canvas.style.height = "auto";

                    // Set canvas height
                    __CANVAS.height = viewport.height;

                    var renderContext = {
                        canvasContext: __CANVAS_CTX,
                        viewport: viewport
                    };

                    
                    
                    page.render(renderContext).then(function() {
                        __PAGE_RENDERING_IN_PROGRESS = 0;

                        // Re-enable Prev & Next buttons
                        $("#pdf-next, #pdf-prev").removeAttr('disabled');

                        // Show the canvas and hide the page loader
                        $("#pdf-canvas").show();
                        $("#page-loader").hide();
                        // Returns a promise, on resolving it will return text contents of the page
                        return page.getTextContent();
                    }).then(function(textContent) {
                         // PDF canvas
                        var pdf_canvas = $("#pdf-canvas"); 

                        // Canvas offset
                        var canvas_offset = pdf_canvas.offset();

                        // Canvas height
                        var canvas_height = pdf_canvas.get(0).height;

                        // Canvas width
                        var canvas_width = pdf_canvas.get(0).width;

                        // Assign CSS to the text-layer element
                        $("#text-layer").css({ left: canvas_offset.left + 'px', top: canvas_offset.top + 'px', height: canvas_height + 'px', width: canvas_width + 'px' });

                        // Pass the data to the method for rendering of text over the pdf canvas.
                        PDFJS.renderTextLayer({
                            textContent: textContent,
                            container: $("#text-layer").get(0),
                            viewport: viewport,
                            textDivs: []
                        });
                        
                        const textLayer = document.getElementById('text-layer');
                        
                        if(searchText.length > 0){
                            const regex = new RegExp(searchText,'ig');
                            textLayer.innerHTML = textLayer.innerHTML.replace(regex, "<span class='highlight'>"+searchText+"</span>");
                        }
                    });
                });
            }


            // Previous page of the PDF
            $("#pdf-prev").on('click', function() {
                if(__CURRENT_PAGE != 1)
                    showPage(--__CURRENT_PAGE);
            });

            // Next page of the PDF
            $("#pdf-next").on('click', function() {
                if(__CURRENT_PAGE != __TOTAL_PAGES)
                    showPage(++__CURRENT_PAGE);
            });
            
            
            function searchPage(doc, pageNumber) {
                return doc.getPage(pageNumber).then(function (page) {
                    return page.getTextContent();
                }).then(function (content) {
                    // Search combined text content using regular expression
                    var text = content.items.map(function (i) { return i.str; }).join('');
                    var re = new RegExp("(.{0,20})" + searchText + "(.{0,20})", "gi"), m;
                    var lines = [];
                    if (m = re.exec(text)) {
                        return pageNumber;
                    }
                    return undefined;
                });
            }

            var zoominbutton = document.getElementById("zoominbutton");
            zoominbutton.onclick = function() {
                __PDF_SCALE = __PDF_SCALE + 0.25;
                showPage(__CURRENT_PAGE);
            };

            var zoomoutbutton = document.getElementById("zoomoutbutton");
            zoomoutbutton.onclick = function() {
                if (__PDF_SCALE <= 0.25) {
                    return;
                }
                __PDF_SCALE = __PDF_SCALE - 0.25;
                showPage(__CURRENT_PAGE);
            };

            const searchBtn = document.getElementById('searchBtn');
            const searchBlock = document.getElementById("searchBlock");
            searchBtn.addEventListener('click',function (e) {
                e.preventDefault();
                if (searchBlock.style.display === "flex") {
                    searchBtn.style.color = "#31353D";
                    searchBlock.style.display = "none";
                } else {
                    moveToPageBtn.style.color = "#31353D";
                    searchBtn.style.color = "orange";
                    moveToPageBlock.style.display = "none";
                    searchBlock.style.display = "flex";
                }
            });

            const moveToPageBtn = document.getElementById("moveToPageBtn");
            const moveToPageBlock = document.getElementById("moveToPageBlock");
            moveToPageBtn.addEventListener('click',function (e) {
                e.preventDefault();
                if (moveToPageBlock.style.display === "flex") {
                    moveToPageBtn.style.color = "#31353D";
                    moveToPageBlock.style.display = "none";
                }
                else {
                    searchBtn.style.color = "#31353D";
                    moveToPageBtn.style.color = "orange";
                    moveToPageBlock.style.display = "flex";
                    searchBlock.style.display = "none";
                }
            });

            function moveToPage(event) {
                event.preventDefault();

                const page = parseInt(document.getElementById("moveToPageInput").value);
                if (page > 0 && page <= __TOTAL_PAGES)
                    showPage(page);
            }
            
            function zoomSelectChange(event) {
                console.log(parseFloat(event.target.value));

                __PDF_SCALE = parseFloat(event.target.value);
                showPage(__CURRENT_PAGE);
            }

        </script>
    </body>
</html>